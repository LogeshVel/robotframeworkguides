"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7133],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),u=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=u(e.components);return i.createElement(l.Provider,{value:t},e.children)},c="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=u(n),d=r,g=c["".concat(l,".").concat(d)]||c[d]||h[d]||s;return n?i.createElement(g,a(a({ref:t},p),{},{components:n})):i.createElement(g,a({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,a=new Array(s);a[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[c]="string"==typeof e?e:r,a[1]=o;for(var u=2;u<s;u++)a[u]=n[u];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},441:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>s,metadata:()=>o,toc:()=>u});var i=n(7462),r=(n(7294),n(3905));const s={},a="Jenkins",o={unversionedId:"using_rf_in_ci_systems/ci/jenkins",id:"using_rf_in_ci_systems/ci/jenkins",title:"Jenkins",description:"Jenkins is an open source automation server, which allows you to integrate into",source:"@site/docs/using_rf_in_ci_systems/ci/jenkins.md",sourceDirName:"using_rf_in_ci_systems/ci",slug:"/using_rf_in_ci_systems/ci/jenkins",permalink:"/docs/using_rf_in_ci_systems/ci/jenkins",draft:!1,editUrl:"https://github.com/MarketSquare/robotframeworkguides/edit/main/website/docs/using_rf_in_ci_systems/ci/jenkins.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"GitLab",permalink:"/docs/using_rf_in_ci_systems/ci/gitlab"},next:{title:"\u26d4 TeamCity",permalink:"/docs/using_rf_in_ci_systems/ci/teamcity"}},l={},u=[{value:"Examples",id:"examples",level:2},{value:"Jenkinsfile with a stage <strong>Run Robot</strong>",id:"jenkinsfile-with-a-stage-run-robot",level:3},{value:"Jenkinsfile with parameters and multiple stages",id:"jenkinsfile-with-parameters-and-multiple-stages",level:3},{value:"Special notes about running tests with Browser library behind firewall",id:"special-notes-about-running-tests-with-browser-library-behind-firewall",level:2},{value:"Preparing the Jenkins agent",id:"preparing-the-jenkins-agent",level:3},{value:"Preparing the Jenkins configuration file",id:"preparing-the-jenkins-configuration-file",level:3}],p={toc:u};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"jenkins"},"Jenkins"),(0,r.kt)("p",null,"Jenkins is an open source automation server, which allows you to integrate into\nmultiple different tools and platforms with various plugins."),(0,r.kt)("p",null,"In order to run ",(0,r.kt)("strong",{parentName:"p"},"jobs"),", you need a ",(0,r.kt)("strong",{parentName:"p"},"Jenkinsfile")," written in Groovy. Each Jenkinsfile has some\n",(0,r.kt)("strong",{parentName:"p"},"stages"),", which contain one or more ",(0,r.kt)("strong",{parentName:"p"},"steps"),". Each job is run one some ",(0,r.kt)("strong",{parentName:"p"},"node"),"\n(or ",(0,r.kt)("strong",{parentName:"p"},"agent"),"), which contains all the necessary software to run your job."),(0,r.kt)("p",null,"If you want to run Robot Framework in your Jenkins job, you need to have ",(0,r.kt)("inlineCode",{parentName:"p"},"robotframework")," installed\non the executing node. If you then want to publish your results, so that they are viewable\nin Jenkins, use the ",(0,r.kt)("a",{parentName:"p",href:"https://plugins.jenkins.io/robot/"},"Robot Framework plugin"),". To get the most\nout of the plugin, please refer to the official plugin documentation."),(0,r.kt)("p",null,"By default, Jenkins won't allow you to open log files in the Jenkins UI. To allow this, you need\nto ",(0,r.kt)("a",{parentName:"p",href:"https://plugins.jenkins.io/robot/#plugin-content-log-file-not-showing-properly"},"change your CSP settings"),".\nHowever, please note that ",(0,r.kt)("strong",{parentName:"p"},"changing your CSP settings will potentially expose your Jenkins instance\nfor security vulnerabilities.")),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("h3",{id:"jenkinsfile-with-a-stage-run-robot"},"Jenkinsfile with a stage ",(0,r.kt)("strong",{parentName:"h3"},"Run Robot")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},'pipeline {\n    agent { label "robot" } // run on an agent, which has Robot Framework installed\n\n    stages {\n        stage("Run Robot") {\n            steps {\n                // --nostatusrc prevents your job from failing automatically if any\n                // tests fail. This is then later handled with the RF plugin with\n                // pass thresholds\n                sh script: "robot --nostatusrc my_tests.robot", returnStatus: true\n            }\n        }\n    }\n\n    post {\n        always {\n            // `onlyCritical: false` is for RF 3.x compatibility. This will be deprecated\n            // and removed in the future.\n            robot outputPath: \'.\', passThreshold: 80.0, unstableThreshold: 70.0, onlyCritical: false\n        }\n    }\n}\n')),(0,r.kt)("h3",{id:"jenkinsfile-with-parameters-and-multiple-stages"},"Jenkinsfile with parameters and multiple stages"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},"pipeline {\n    properties([\n            parameters([\n                    choice(choices: ['test','staging'], description: 'Environment to run the tests against', name: 'environment'),\n                    string(name: 'INCLUDE', defaultValue: 'valid_loginORinvalid_login', description: 'Specify which tags you want to run (e.g. valid_login)'),\n                    string(name: 'EXCLUDE', description: 'Specify if you want to exclude tests by category tags'),\n                    string(name: 'FOLDER', defaultValue: 'tests', description: 'Specify the folder for tests (e.g. . for current dir'),\n                    string(name: 'BRANCH', defaultValue: 'main', description: 'Specify the branch for tests (e.g. main')\n    ])\n\n    // -- Script arguments --------------------------------\n    def include = \"${params.INCLUDE}\"\n    def exclude = \"${params.EXCLUDE}\"\n    def folder = \"${params.FOLDER}\"\n    def branch = \"${params.BRANCH}\"\n    def args = \"\"\n    // ----------------------------------------------------\n\n    agent { label 'robot'} // how is your Jenkins agent labeled, so that right kind of agent is used for execution\n\n    stages {\n        stage('Checkout') {\n            steps {\n                script {\n                    // checkout your code here \n                }\n            }\n        }\n        stage('Define args') {\n            steps {\n                script {\n                    if (!include.isEmpty()) {\n                        args += \" -i $include\"\n                    }\n                    if (!exclude.isEmpty()) {\n                        args += \" -e $exclude\"\n                    }\n                    if (!folder.isEmpty()) {\n                        args += \" $folder\"\n                    } else {\n                        args += \" .\"\n                    }\n                }\n            }\n        }\n        stage('Run Robot tests') {\n            steps {\n                sh \"\"\"\n                    // command to run your tests\n                \"\"\"\n            }\n            post {\n                always {\n                    step([\n                            $class              : 'RobotPublisher',\n                            outputPath          : 'test_results',\n                            outputFileName      : \"output.xml\",\n                            reportFileName      : 'report.html',\n                            logFileName         : 'log.html',\n                            disableArchiveOutput: false,\n                            passThreshold       : 95.0,\n                            unstableThreshold   : 95.0,\n                            otherFiles          : \"**/*.png\",\n                    ])\n                }\n            }\n")),(0,r.kt)("h2",{id:"special-notes-about-running-tests-with-browser-library-behind-firewall"},"Special notes about running tests with Browser library behind firewall"),(0,r.kt)("p",null,"This is related especially to the use of Browser library which requires installations and initialisation to be done before the tests can be executed."),(0,r.kt)("h3",{id:"preparing-the-jenkins-agent"},"Preparing the Jenkins agent"),(0,r.kt)("p",null,"These are steps that needs to be done by the person administrating the Jenkins agents."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Install all the tools that are needed for running the tests: nodejs, python 3.x, Robot Framework, Browser library"),(0,r.kt)("li",{parentName:"ul"},"Set ",(0,r.kt)("inlineCode",{parentName:"li"},"PLAYWRIGHT_BROWSERS_PATH")," to point where you want to install browsers"),(0,r.kt)("li",{parentName:"ul"},"Execute ",(0,r.kt)("inlineCode",{parentName:"li"},"rfbrowser init")," to get the base setup for Browser library. Note that you still need to execute it with Jenkins user as well, see below.")),(0,r.kt)("h3",{id:"preparing-the-jenkins-configuration-file"},"Preparing the Jenkins configuration file"),(0,r.kt)("p",null,'These are steps you need to have in your Jenkins configuration. I recommend putting those as commands in the same shell command set together with test execution ("command to run your tests")'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"npm config set registry https://local-site-for-node-modules")," <-- here you need a server that is providing all required node modules; if it doesn't exist proxy config might work as well"),(0,r.kt)("li",{parentName:"ul"},"Additional commands that might be needed could be ",(0,r.kt)("inlineCode",{parentName:"li"},"npm config set strict-ssl false")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"npm config set always-auth true"),"depending how the server is configured"),(0,r.kt)("li",{parentName:"ul"},"Then run ",(0,r.kt)("inlineCode",{parentName:"li"},"rfbrowser init --skip-browsers")," to avoid the installation of browsers that may appear hard over the firewall"),(0,r.kt)("li",{parentName:"ul"},"... and use instead the ones installed by root when the agent was initialised by pointing with ```PLAYWRIGHT_BROWSERS_PATH```` to the location defined")),(0,r.kt)("p",null,"Now you should be ready to execute tests."))}c.isMDXComponent=!0}}]);